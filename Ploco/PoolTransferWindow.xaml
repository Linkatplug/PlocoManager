<Window x:Class="Ploco.PoolTransferWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Ploco.Converters"
        Title="Gérer les Locomotives" Height="400" Width="600"
        Loaded="Window_Loaded" Closing="Window_Closing">
    <Window.Resources>
        <local:StatutToBrushConverter x:Key="StatutToBrushConverter"/>
    </Window.Resources>
    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Titres -->
        <StackPanel Grid.Column="0" Grid.Row="0" Margin="0,0,0,10">
            <TextBlock Text="Pool Sibelit" FontWeight="Bold"/>
            <TextBlock x:Name="SibelitCountText" Foreground="SlateGray"/>
        </StackPanel>
        <StackPanel Grid.Column="2" Grid.Row="0" Margin="0,0,0,10" HorizontalAlignment="Right">
            <TextBlock Text="Pool Lineas" FontWeight="Bold" HorizontalAlignment="Right"/>
            <TextBlock x:Name="LineasCountText" Foreground="SlateGray" HorizontalAlignment="Right"/>
        </StackPanel>

        <!-- ListBox pour Pool Sibelit -->
        <ListBox x:Name="ListBoxSibelit"
                 Grid.Column="0"
                 Grid.Row="0"
                 Margin="0,30,5,0"
                 SelectionMode="Extended"
                 ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                 ScrollViewer.VerticalScrollBarVisibility="Auto"
                 ScrollViewer.CanContentScroll="False"
                 MouseDoubleClick="ListBoxSibelit_MouseDoubleClick">
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel/>
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                    <Setter Property="VerticalContentAlignment" Value="Center"/>
                </Style>
            </ListBox.ItemContainerStyle>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border Background="{Binding Status, Converter={StaticResource StatutToBrushConverter}}"
                            CornerRadius="4" Padding="4" Margin="2">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <TextBlock Grid.Row="0" Text="{Binding Number}" Foreground="White" FontWeight="Bold" FontSize="12"
                                       HorizontalAlignment="Left"/>
                            <TextBlock Grid.Row="1" Text="{Binding TractionDisplay}" FontSize="10" Foreground="White"
                                       HorizontalAlignment="Right" Margin="0,2,0,0">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Visibility" Value="Visible"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding TractionDisplay}" Value="">
                                                <Setter Property="Visibility" Value="Collapsed"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </Grid>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
        <!-- ListBox pour Pool Lineas -->
        <ListBox x:Name="ListBoxLineas"
                 Grid.Column="2"
                 Grid.Row="0"
                 Margin="5,30,0,0"
                 SelectionMode="Extended"
                 ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                 ScrollViewer.VerticalScrollBarVisibility="Auto"
                 ScrollViewer.CanContentScroll="False"
                 MouseDoubleClick="ListBoxLineas_MouseDoubleClick">
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel/>
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                    <Setter Property="VerticalContentAlignment" Value="Center"/>
                </Style>
            </ListBox.ItemContainerStyle>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border Background="{Binding Status, Converter={StaticResource StatutToBrushConverter}}"
                            CornerRadius="4" Padding="4" Margin="2">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <TextBlock Grid.Row="0" Text="{Binding Number}" Foreground="White" FontWeight="Bold" FontSize="12"
                                       HorizontalAlignment="Left"/>
                            <TextBlock Grid.Row="1" Text="{Binding TractionDisplay}" FontSize="10" Foreground="White"
                                       HorizontalAlignment="Right" Margin="0,2,0,0">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Visibility" Value="Visible"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding TractionDisplay}" Value="">
                                                <Setter Property="Visibility" Value="Collapsed"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </Grid>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <!-- Boutons de transfert -->
        <StackPanel Grid.Column="1" Grid.Row="0" VerticalAlignment="Center">
            <Button x:Name="BtnTransferToLineas" Content="&gt;&gt;" Width="50" Margin="0,5" Click="BtnTransferToLineas_Click"/>
            <Button x:Name="BtnTransferToSibelit" Content="&lt;&lt;" Width="50" Margin="0,5" Click="BtnTransferToSibelit_Click"/>
        </StackPanel>

        <!-- Bouton de fermeture -->
        <Button Grid.Column="2" Grid.Row="1" Content="Fermer" Width="100" HorizontalAlignment="Right" Margin="0,10,0,0" Click="BtnClose_Click"/>
    </Grid>
</Window>
